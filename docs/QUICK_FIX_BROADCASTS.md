# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Broadcasts

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–µ –º–æ–∂–µ—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/broadcasts` - –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç.

## ‚ö° –†–µ—à–µ–Ω–∏–µ –∑–∞ 3 –º–∏–Ω—É—Ç—ã

### 1Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (30 —Å–µ–∫)

–°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
```bash
npm install
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
```bash
npm run diagnose
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞.

### 2Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–ª–∞–¥–∫–∏ (1 –º–∏–Ω)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:3000/debug**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: **"Set Admin Role"**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
4. –ù–∞–∂–º–∏—Ç–µ: **"Test Broadcasts Access"**

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (30 —Å–µ–∫)

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **http://localhost:3000/broadcasts**

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≥–æ—Ç–æ–≤–æ! üéâ

## üîß –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø—Ä–∞–≤—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª: `migrations/fix_broadcasts_rls_policies.sql`
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/broadcasts`

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Application ‚Üí Cookies
2. –£–¥–∞–ª–∏—Ç–µ cookie `sb-rajacaayhzgjoitquqvt-auth-token`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/auth` –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 1-3 –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–†–µ—à–µ–Ω–∏–µ"

### –í–∞—Ä–∏–∞–Ω—Ç C: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –≤—Ä—É—á–Ω—É—é

–í Supabase Dashboard ‚Üí SQL Editor:

```sql
-- –ó–∞–º–µ–Ω–∏—Ç–µ '–≤–∞—à-user-id' –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π ID
INSERT INTO profiles (id, role) 
VALUES ('–≤–∞—à-user-id', 'admin')
ON CONFLICT (id) 
DO UPDATE SET role = 'admin';
```

–£–∑–Ω–∞—Ç—å —Å–≤–æ–π user-id –º–æ–∂–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/debug`.

## üìã Checklist

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
- [ ] –í—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã (–∑–∞—à–ª–∏ —á–µ—Ä–µ–∑ `/auth`)
- [ ] –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ `/debug`)
- [ ] –†–æ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–∞–∫ `admin` –∏–ª–∏ `editor`
- [ ] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è)

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- [BROADCASTS_DIAGNOSTIC_SUMMARY.md](BROADCASTS_DIAGNOSTIC_SUMMARY.md) - –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç
- [docs/BROADCASTS_DEBUG_GUIDE.md](docs/BROADCASTS_DEBUG_GUIDE.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- [BROADCASTS_FIX_README.md](BROADCASTS_FIX_README.md) - –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üí° –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –û—à–∏–±–∫–∞ "Unauthorized"**  
A: –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –Ω–∞ `/auth`

**Q: –û—à–∏–±–∫–∞ "User profile not found"**  
A: –ù–∞–∂–º–∏—Ç–µ "Set Admin Role" –Ω–∞ `/debug`

**Q: –û—à–∏–±–∫–∞ "Permission denied"**  
A: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é `fix_broadcasts_rls_policies.sql`

**Q: –û—à–∏–±–∫–∞ "Table does not exist"**  
A: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é `create_sent_mails_table.sql`

---

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12).
