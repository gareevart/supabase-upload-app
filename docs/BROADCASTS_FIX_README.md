# üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ—Å—Ç—É–ø–∞ –∫ Broadcasts

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞" –∏–ª–∏ "Invalid Refresh Token" –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/broadcasts`, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!
–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `access_token` –∏–∑ cookie, –º–∏–Ω—É—è –ø—Ä–æ–±–ª–µ–º–Ω—ã–π `refresh_token`.

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (3 —à–∞–≥–∞)

### 1Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–ª–∞–¥–∫–∏
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **http://localhost:3000/debug**

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Set Admin Role"**
- –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Test Broadcasts Access"**
- –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/broadcasts`

## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /debug?

–°—Ç—Ä–∞–Ω–∏—Ü–∞ `/debug` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- ‚úÖ –í–∞—à User ID –∏ Email
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ñ–∏–ª–µ –∏ —Ç–µ–∫—É—â–µ–π —Ä–æ–ª–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–∞ –∫ broadcasts
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

## üõ†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∏–ª–∞—Å—å

### –í–∞—Ä–∏–∞–Ω—Ç A: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª: `migrations/fix_broadcasts_rls_policies.sql`
3. –≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–∏—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É profiles

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles` –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```sql
SELECT * FROM profiles WHERE id = '–≤–∞—à-user-id';
```

–ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë:

```sql
INSERT INTO profiles (id, role) 
VALUES ('–≤–∞—à-user-id', 'admin');
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å broadcasts –Ω—É–∂–Ω–æ:
- ‚úÖ –ë—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –ò–º–µ—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`
- ‚úÖ –ò–º–µ—Ç—å —Ä–æ–ª—å `admin` –∏–ª–∏ `editor`

## üéØ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Debug —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: `/debug`
- **Broadcasts**: `/broadcasts`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `docs/BROADCASTS_ACCESS_FIX.md`

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏

- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–æ–ª–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Next.js

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å broadcasts. üéâ
