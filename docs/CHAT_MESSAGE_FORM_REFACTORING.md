# Рефакторинг формы отправки сообщений в чате

## Описание изменений

Форма ввода и отправки сообщений была вынесена в отдельный компонент `ChatMessageForm` для улучшения модульности и удобства дальнейшей разработки.

## Структура

### Новый компонент: `ChatMessageForm`

**Расположение:** `/app/components/chat/ChatMessageForm.tsx`

**Функциональность:**
- Поле ввода текста сообщения (TextArea)
- Кнопка переключения режима рассуждений (только для YandexGPT)
- Кнопка отправки сообщения
- Обработка отправки по Enter (Shift+Enter для новой строки)
- Автоматическое восстановление текста при ошибке отправки

**Props:**
- `onSubmit: (message: string) => Promise<void>` - callback для отправки сообщения
- `isMessageSending: boolean` - флаг отправки сообщения
- `disabled?: boolean` - отключение формы (опционально)

### Изменения в `ChatInterface`

**Удалено:**
- Локальный стейт `messageText`
- Локальный стейт `isSettingsOpen`
- Ref `textareaRef`
- Функции `handleSubmit` и `handleKeyDown`
- Импорт неиспользуемых иконок (`Stop`, `ArrowUturnCwLeft`, `GearBranches`)

**Добавлено:**
- Импорт `ChatMessageForm`
- Функция `handleMessageSubmit` - обработчик отправки сообщений с интеграцией режима рассуждений

**Изменено:**
- Весь блок формы (`<form>...</form>`) заменён на компонент `<ChatMessageForm />`

## Преимущества рефакторинга

1. **Модульность:** Форма теперь является независимым компонентом, который можно переиспользовать
2. **Чистый код:** `ChatInterface` стал проще и сфокусирован на логике отображения сообщений
3. **Удобство доработки:** Любые улучшения формы теперь изолированы в одном файле
4. **Соответствие FSD:** Компонент размещён в правильной структуре проекта

## Пример использования

```tsx
<ChatMessageForm
  onSubmit={handleMessageSubmit}
  isMessageSending={isMessageSending}
  disabled={false}
/>
```

## Сохранённая функциональность

- ✅ Отправка сообщений по Enter
- ✅ Новая строка по Shift+Enter
- ✅ Кнопка режима рассуждений для YandexGPT
- ✅ Блокировка во время отправки
- ✅ Восстановление текста при ошибке
- ✅ Интеграция с контекстом выбора модели

## Дата создания

10 октября 2025

