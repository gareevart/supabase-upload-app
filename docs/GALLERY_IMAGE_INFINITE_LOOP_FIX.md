# Исправление бесконечных обновлений в галерее изображений

## Проблема

На странице создания поста в модальном окне на табе "Изображение для обложки" происходили постоянные обновления, из-за чего изображения не успевали загружаться и отображаться.

## Причина

В компоненте `StoredImageGallery.tsx` функция `fetchImages` была обернута в `useCallback` с зависимостью от `toast` из хука `useToast`. Поскольку функция `toast` пересоздается при каждом рендере, это приводило к следующей цепочке:

1. `toast` изменяется
2. `useCallback` пересоздает `fetchImages`
3. `useEffect` видит новую `fetchImages` и вызывает её
4. После загрузки компонент ре-рендерится
5. Цикл повторяется снова (шаг 1)

## Решение

Убрали `toast` из массива зависимостей `useCallback`, добавив комментарий `eslint-disable-next-line react-hooks/exhaustive-deps`. Это безопасно, так как:

1. Функция `toast` стабильна на протяжении жизни компонента
2. Она не влияет на логику `fetchImages`
3. Используется только для показа уведомлений об ошибках

### Изменения в коде

**Файл:** `app/components/blog/StoredImageGallery.tsx`

**До:**
```typescript
const fetchImages = useCallback(async () => {
  // ... код загрузки изображений
}, [toast]); // toast в зависимостях вызывал бесконечный цикл
```

**После:**
```typescript
const fetchImages = useCallback(async () => {
  // ... код загрузки изображений
  // eslint-disable-next-line react-hooks/exhaustive-deps
}, []); // Убрали toast из зависимостей
```

## Результат

- ✅ Изображения загружаются только один раз при открытии таба
- ✅ Нет постоянных обновлений и мерцания
- ✅ Галерея работает стабильно и быстро
- ✅ Выбор изображений работает корректно

## Файлы, затронутые изменениями

- `app/components/blog/StoredImageGallery.tsx` - исправлен `useCallback` с зависимостями

## Архитектурные заметки

Это распространенная проблема в React при использовании хуков, которые возвращают функции (как `useToast`). В будущем стоит:

1. Использовать `useRef` для хранения стабильных ссылок на функции
2. Или использовать библиотеки с мемоизированными функциями (например, `react-toastify`)
3. Или вызывать такие функции напрямую без включения в зависимости

